#!/bin/sh
# Run build from root (uses pnpm -r build to build all packages)
# This will catch actual build failures before they reach production

echo "üî® Running pre-commit build check..."
echo "   (Streaming output - you'll see progress below)"

# Run build with real-time output streaming
# Don't capture output - let it stream directly
pnpm build

BUILD_EXIT_CODE=$?

# Only fail if the build actually failed (exit code != 0)
if [ $BUILD_EXIT_CODE -ne 0 ]; then
  echo ""
  echo "‚ùå Build failed! Exit code: $BUILD_EXIT_CODE"
  exit 1
fi

echo ""
echo "‚úÖ Build passed!"
